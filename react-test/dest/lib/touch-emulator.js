(function(e,t,n,r){function a(e,t,n,r,i){r=r||0,i=i||0,this.identifier=t,this.target=e,this.clientX=n.clientX+r,this.clientY=n.clientY+i,this.screenX=n.screenX+r,this.screenY=n.screenY+i,this.pageX=n.pageX+r,this.pageY=n.pageY+i}function f(){var e=[];return e.item=function(e){return this[e]||null},e.identifiedTouch=function(e){return this[e+1]||null},e}function l(){var n=[e,t.documentElement],i=["ontouchstart","ontouchmove","ontouchcancel","ontouchend"];for(var s=0;s<n.length;s++)for(var o=0;o<i.length;o++)n[s]&&n[s][i[o]]==r&&(n[s][i[o]]=null)}function c(){return"ontouchstart"in e||e.Modernizr&&e.Modernizr.touch||(navigator.msMaxTouchPoints||navigator.maxTouchPoints)>2}function h(e){e.preventDefault(),e.stopPropagation()}function p(e){return function(t){h(t);if(t.which!==1)return;if(t.type=="mousedown"||!o||o&&!o.dispatchEvent)o=t.target;i&&!t.shiftKey&&(d("touchend",t),i=!1),d(e,t),!i&&t.shiftKey&&(i=!0,s={pageX:t.pageX,pageY:t.pageY,clientX:t.clientX,clientY:t.clientY,screenX:t.screenX,screenY:t.screenY},d("touchstart",t)),t.type=="mouseup"&&(s=null,i=!1,o=null)}}function d(e,n){var r=t.createEvent("Event");r.initEvent(e,!0,!0),r.altKey=n.altKey,r.ctrlKey=n.ctrlKey,r.metaKey=n.metaKey,r.shiftKey=n.shiftKey,r.touches=m(n,e),r.targetTouches=m(n,e),r.changedTouches=g(n,e),o.dispatchEvent(r)}function v(e){var t=new f;if(i){var n=b.multiTouchOffset,r=s.pageX-e.pageX,u=s.pageY-e.pageY;t.push(new a(o,1,s,r*-1-n,u*-1+n)),t.push(new a(o,2,s,r+n,u-n))}else t.push(new a(o,1,e,0,0));return t}function m(e,t){if(e.type=="mouseup")return new f;var n=v(e);return i&&e.type!="mouseup"&&t=="touchend"&&n.splice(1,1),n}function g(e,t){var n=v(e);return i&&e.type!="mouseup"&&(t=="touchstart"||t=="touchend")&&n.splice(0,1),n}function y(e){var n,r,i,s;for(r=0;r<e.touches.length;r++){n=e.touches[r],i=u[n.identifier],i||(i=u[n.identifier]=t.createElement("div"),t.body.appendChild(i)),s=b.template(n);for(var o in s)i.style[o]=s[o]}if(e.type=="touchend"||e.type=="touchcancel")for(r=0;r<e.changedTouches.length;r++)n=e.changedTouches[r],i=u[n.identifier],i&&(i.parentNode.removeChild(i),delete u[n.identifier])}function b(){if(c())return;l(),e.addEventListener("mousedown",p("touchstart"),!0),e.addEventListener("mousemove",p("touchmove"),!0),e.addEventListener("mouseup",p("touchend"),!0),e.addEventListener("mouseenter",h,!0),e.addEventListener("mouseleave",h,!0),e.addEventListener("mouseout",h,!0),e.addEventListener("mouseover",h,!0),e.addEventListener("touchstart",y,!1),e.addEventListener("touchmove",y,!1),e.addEventListener("touchend",y,!1),e.addEventListener("touchcancel",y,!1)}var i=!1,s,o,u={};t.createTouch||(t.createTouch=function(t,n,i,s,o,u,f,l,c){if(l==r||c==r)l=s-e.pageXOffset,c=o-e.pageYOffset;return new a(n,i,{pageX:s,pageY:o,screenX:u,screenY:f,clientX:l,clientY:c})}),t.createTouchList||(t.createTouchList=function(){var e=new f;for(var t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length=arguments.length,e}),b.multiTouchOffset=75,b.template=function(e){var t=30,n="translate("+(e.clientX-t/2)+"px, "+(e.clientY-t/2)+"px)";return{position:"fixed",left:0,top:0,background:"#fff",border:"solid 1px #999",opacity:.6,borderRadius:"100%",height:t+"px",width:t+"px",padding:0,margin:0,display:"block",overflow:"hidden",pointerEvents:"none",webkitUserSelect:"none",mozUserSelect:"none",userSelect:"none",webkitTransform:n,mozTransform:n,transform:n}},typeof define=="function"&&define.amd?define([],function(){return b}):typeof module!="undefined"&&module.exports?module.exports=b:e[n]=b})(window,document,"TouchEmulator");